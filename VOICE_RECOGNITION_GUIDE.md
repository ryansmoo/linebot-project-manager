# 🎤 語音識別功能使用指南

## 功能簡介

您的 LINE BOT 現在支援語音識別功能！您可以透過發送語音訊息來記錄任務，系統會自動將語音轉換為文字並建立任務。

## 🌟 功能特色

- 🎙️ **智能語音識別**：使用 OpenAI Whisper API，支援高準確度中文語音識別
- 📝 **自動任務建立**：語音轉文字後自動建立任務
- 🎨 **精美視覺回應**：專用的語音識別成功卡片設計
- 📋 **完整整合**：與現有任務管理系統完全整合
- 🔍 **標記識別**：語音建立的任務會標記「📢 透過語音輸入」

## 使用方式

### 📱 在 LINE 中使用

1. **開啟與 BOT 的對話**
2. **按住錄音鈕**發送語音訊息
3. **等待處理**：系統會顯示「🎤 正在處理您的語音訊息，請稍候...」
4. **查看結果**：語音轉換完成後會顯示：
   - 紫色的語音識別成功卡片
   - 藍色的今日任務清單
   - Quick Reply 按鈕（今天、全部、帳戶）

### 🎯 使用範例

**語音輸入：**
> "明天下午三點要跟客戶開會討論新專案"

**系統回應：**
- 🎤 語音識別成功
- 識別結果：明天下午三點要跟客戶開會討論新專案
- ✏️ 編輯任務按鈕

## ⚙️ 技術配置

### 必需的環境變數

在 `.env` 檔案中確保設定：

```env
# OpenAI API 設定（必須）
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo

# LINE Bot 設定（必須）
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token
LINE_CHANNEL_SECRET=your_channel_secret
```

### 📋 必需套件

系統已自動安裝以下套件：
- `openai` - OpenAI API 客戶端
- `form-data` - 檔案上傳處理
- `@line/bot-sdk` - LINE Bot SDK

## 🔧 支援格式

- **語音格式**：LINE 支援的所有音訊格式（m4a, aac 等）
- **語音長度**：建議 1-60 秒
- **語言支援**：主要支援中文，也支援英文

## ⚠️ 注意事項

### 使用限制
- 需要有效的 OpenAI API Key
- 語音檔案大小限制：25MB（LINE 平台限制）
- 語音時長建議不超過 60 秒

### 成本考量
- OpenAI Whisper API 按使用量收費
- 大約每分鐘語音 $0.006 USD

### 錯誤處理
- 如果語音無法識別，系統會提示使用文字輸入
- 如果 API 故障，會顯示錯誤訊息
- 臨時檔案會自動清理

## 🚀 啟動確認

當您看到以下啟動訊息，表示語音識別功能已啟用：

```
🚀 精簡版 LINE Bot 啟動成功！
🎤 語音識別功能已啟用 (使用 OpenAI Whisper)
```

## 🐛 故障排除

### 常見問題

1. **語音無法識別**
   - 檢查 `OPENAI_API_KEY` 是否正確設定
   - 確保語音清晰，背景噪音不要太大
   - 嘗試說中文或英文

2. **API 錯誤**
   - 檢查 OpenAI API Key 是否有效
   - 確認 OpenAI 帳戶是否有足夠額度
   - 檢查網路連接

3. **檔案處理錯誤**
   - 確認應用程式有檔案讀寫權限
   - 檢查磁碟空間是否足夠

### 日誌檢查

查看控制台輸出，關鍵字包括：
- `🎵 開始處理語音訊息`
- `📥 開始下載語音檔案`
- `🔄 使用 OpenAI Whisper API 轉換語音`
- `✅ 語音轉文字成功`

## 📈 使用統計

每次語音識別會在日誌中記錄：
- 語音檔案大小
- 識別耗時
- 識別結果
- 任務建立狀態

---

🎉 現在您可以透過語音輕鬆記錄任務了！嘗試發送語音訊息給您的 LINE BOT 吧！